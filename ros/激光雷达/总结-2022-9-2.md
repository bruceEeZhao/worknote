[TOC]

## 1 本周主要工作

本周主要工作如下：

1. 对ros1的相关概念进行了学习，并在ROS1下编写Topic通信Demo
2. 对ros2简单的学习，了解ros2的设计理念，与ros1的不同之处，但是ros2学习的时间较短，这方面的知识还比较浅显。
3. 对分配的激光雷达任务进行实现。



接下来将详细的说明一下激光雷达任务的情况。

## 2 激光雷达任务

### 2.1 任务要求

> 以Velodyne激光雷达实物传感器为数据输入源，基于ROS实现实物场景构建、地图使用和路径规划。利用激光雷达，构建6层A区的实物场景，并转化为二维地图，利用ROS通信传递给小乌龟，完成小乌龟从A区入口到各自工位的避障路径规划和运行轨迹展示。

### 2.2 任务分解

整个任务可以分解为4个部分：

1. 使用激光雷达对环境进行扫描，并使用rosbag记录；
2. rosbag数据重放，使用A-LOAM完成3维地图的构建；
3. 使用octomap将构建好的3维地图转换为2维栅格地图；
4. 使用生成的2维地图在仿真环境中仿真。

### 2.3 任务进度

上述的4个任务均已完成，其中第4个任务使用turtlebot3机器人完成仿真。

### 2.4 遇到并解决的问题

1. 发现激光雷达的驱动仅支持ros1，因此后续的实验均在ros1上完成。
2. 开始时是在docker上运行的ros1,但是docker对于图形的支持不好，导致运行rviz时会启动失败，但通过把采集的激光数据转化为pcb文件发现激光采集和A-LOAM建图是可以正常运行的。
3. 之后尝试在物理机上安装ros1,但是由于物理机是22.04，软件源中的opencv库版本较高，导致编译A-LOAM包失败。之后安装了18.04的虚拟机，ros1各组件均可正常运行。
4. 使用octomap转换完地图之后，发现读取地图失败，原因是地图描述文件(.yaml)中一个origin字段存在问题，例如`origin: [-14.100000, -27.150000, -nan]`，需要将-nan改为0.000000

### 2.5 目前的问题

1. 目前把整个流程跑通了，但是对于具体的算法实现还没有具体了解，如A-LOAM，octomap，AMCL，DWAPlannerROS。
2. 通过这几天的学习发现较大的工程都是通过roslaunch启动的，目前对于roslaunch还未具体了解。
3. 整个实验基本未涉及代码的编写，因此目前对ros1的编程还不太熟悉。